<!DOCTYPE html>


<html>
<body style="background-color:rgba(255, 190, 35, 0.7);">

<!--//======================================================================================================================-->
<!--//======================================================================================================================-->

    <div style="border: 5px solid Black;background-color:rgba(0, 0, 0, 0.8);color:white;padding:20px;">
        <h2><img src="../html_images/mini_busit.png" alt="busit" style="float:right;width:100px;height:100px;">
            
            BUSIT - Local Bus 

        </h2>
        <p>Hello bus number #; </p>
        <p>Please follow the Route's instructions below and respect the passengers, Drive Save.</p>
    </div> 

<!--//======================================================================================================================-->
<!--//======================================================================================================================-->

    <h2>ROUTE INFO:</h2>
    <p style="text-align:center;">
        <img src="" id="image" width="104" height="102">

    </p>


<!--//======================================================================================================================-->
<!--//======================================================================================================================-->


    <h2> Pick up Requests: <img src="../html_images/request_bus_stop.png" alt="request_logo" style="float:left;width:38px;height:38px;">
    </h2>
    <div style="border: 2px solid Black;background-color:rgba(210, 216, 163, 0.7);color:black;padding:20px;">
        <p id='request' > Rua Rafael Bordalo Pinheiro. 
            <input type="button" onclick ="reqAcepted()" value="Accept Pick up!">
            <input type="button" onclick ="reqDenied()"  value="Decline Pick up!">
            Time: <output id="num_req_timeout"></output> 
        </p>
        <p id='request_acepted' > Acepted!</p>
        
        <p id='request_denied' > Denied!</p>
    </div>

<!--//======================================================================================================================-->
<!--//======================================================================================================================-->


<script> 


    const reqTimeout = 5000; // 5 sec
    const go = '../html_images/go_sign.png';
    const st = '../html_images/stop_b.png';
    const image = document.getElementById("image");

    let flag_req_acepted = false; 
    let flag_req_denied  = false;

    document.getElementById('request').style.display         = 'none';
    document.getElementById('request_acepted').style.display = 'none';
    document.getElementById('request_denied').style.display  = 'none';


    image.src = go;
    requestPickUp();
    setTimeout(function(){
        var i = 1;
        
        if(i == 0)
            image.src = go;
        else {
            image.src = st;
        }

}, 3000);

// -----------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------


function requestPickUp(){
    
    document.getElementById('request').style.display = 'block';
    
    for (let i = reqTimeout; i >= 0; i--) {
        setTimeout(function(){
            document.getElementById("num_req_timeout").innerHTML = i;
        }, 1000);
        if (flag_req_acepted || flag_req_denied)
            break;
    }
    document.getElementById('request').style.display = 'block';
    
    if (flag_req_acepted){
        flag_req_acepted = false;
        flag_req_denied  = false;
        document.getElementById('request_acepted').style.display = 'block';
    }
    else {
        flag_req_acepted = false;
        flag_req_denied  = false;
        document.getElementById('request_denied').style.display  = 'block';
    }        
}

// -----------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------

    function reqDenied(){
        flag_req_denied = true;
    }
    function reqAcepted(){
        flag_req_acepted = true;
    }

</script>

</body>
</html>